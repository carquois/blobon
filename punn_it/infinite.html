            {% load i18n %}
            {% load thumbnail %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  
  <title>Infinite Scroll &middot; jQuery Masonry</title>
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
  <link rel="stylesheet" href="http://masonry.desandro.com/css/style.css" />
  
  <link href="{{ STATIC_URL }}css/bootstrap.css" rel="stylesheet"> 
  <!-- scripts at bottom of page -->

    <!-- Le styles -->
    <link href="{{ STATIC_URL }}css/bootstrap.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}css/infinite.css" rel="stylesheet">
    <link href="{{ STATIC_URL }}css/style.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
      }
      {% block additional_style %}{% endblock %}
    </style>

    <!-- Le analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-34847879-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    {% block additional_analytics %}{% endblock %}
    <!-- Le jQuery -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
  </head>


</head>
<body>
     <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/fr_CA/all.js#xfbml=1&appId=339826172767964";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <div class="navbar navbar-fixed-top" style=" max-height:55px;">
      <div class="navbar-inner" style=" max-height:55px;">
        <div class="container" style=" max-height:55px;">
          <ul class="nav">
            <li class="">
{% if user.userprofile.domain %}
	      <a class="brand" href="{{ home }}">{{ user.first_name }} {{ user.last_name }}</a> 
{% else %}
	      <a class="brand" href="{{ home }}">{{ user.username }}</a> 
{% endif %}
            </li>
	  </ul>
        </div>
      </div>
    </div> 
  
  <section style="padding-left:20px;padding-right:30px;">
    

<div id="container" class="transitions-enabled infinite-scroll clearfix">

              {% for punn in punns %}


              <div class="col2 thumbnailsMAIN">
                <a href="{{ punn.get_absolute_url }}">
                  {% thumbnail punn.pic "155x185" crop="center" as im %}
                  <img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
                  {% endthumbnail %}
                <!--<a href="#"><div class="itemicon1"></div></a>
                <a href="#"><div class="itemicon2"><div class="itemTexte">{{ punn.karma }}</div></div></a>
                <a href="#"><div class="itemicon3"><div class="itemTexte2">{{ punn.number_of_comments }}</div></div></a>
                <a href="#"> <div class="itemicon4"></div></a>-->
              </div> 





{% endfor %}

</div> <!-- #container -->

<nav id="page-nav">
<a href="?page={{ punns.next_page_number }}"></a>
</nav>

<script src="http://masonry.desandro.com/js/jquery-1.7.1.min.js"></script>
<script src="http://masonry.desandro.com/jquery.masonry.min.js"></script>
<script src="http://masonry.desandro.com/js/jquery.infinitescroll.min.js"></script>
<script>
  $(function(){
    
    var $container = $('#container');
    
    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector: '.thumbnailsMAIN',
        columnWidth: 78
      });
    });
    
    $container.infinitescroll({
      navSelector  : '#page-nav',    // selector for the paged navigation 
      nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
      itemSelector : '.thumbnailsMAIN',     // selector for all items you'll retrieve
      loading: {
          finishedMsg: 'No more pages to load.',
          img: 'http://i.imgur.com/6RMhx.gif'
        }
      },
      // trigger Masonry as a callback
      function( newElements ) {
        // hide new items while they are loading
        var $newElems = $( newElements ).css({ opacity: 0 });
        // ensure that images load before adding to masonry layout
        $newElems.imagesLoaded(function(){
          // show elems now they're ready
          $newElems.animate({ opacity: 1 });
          $container.masonry( 'appended', $newElems, true ); 
        });
      }
    );
    
  });
</script>
  </section> <!-- #content -->

</body>
</html>

